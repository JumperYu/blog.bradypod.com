<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>html5贪吃蛇-树懒博客-BradyPod's Blog</title>
  <meta name="description" content="树懒博客；BradyPod's Blog;89后，工作在广州；Java程序员。">
  <meta name="keywords" content="java, linux, shell, nginx, lua, mysql, memcached, redis">
  <meta name="author" content="bradypod">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="favicon.ico" type="image/ico" rel="icon">
  <link href="favicon.ico" type="image/ico" rel="shortcut icon">

  <link rel="canonical" href="http://blog.bradypod.com/">
  <link rel="stylesheet" href="/static/css/bootstrap.min.css" media="all">
  <link rel="stylesheet" href="/static/css/font-awesome.min.css" media="all">
  <link rel="stylesheet" href="/static/css/style.css" media="all">
  <link rel="stylesheet" href="/static/css/desert.css" media="all">
 </head>
<body onload="prettyPrint()">
	<div class="container">

    <header class="header">
      <div class="title"><a title="bradypod's blog" href="/">BradyPod's blog</a></div>
      <ul class="nav navbar-nav navbar-right visible-lg visible-md">
        <li>
          <form id="search-form" class="form-group has-success visible-lg" role="form">
            <input type="text" class="form-control input-sm" placeholder="Search" id="query" style="width: 110px;">
          </form>
        </li>
        <li><a href="https://github.com/JumperYu" title="我的github主页"><i class="icon-github"></i> github</a></li>
        <li><a href="http://weibo.com/javaserverfaces/home?wvr=5" title="我的微博主页"><i class="icon-pinterest-sign"></i> weibo</a></li>
        <li><a href="index.html" title="联系我"><i class="icon-phone"></i> telphone</a></li>
      </ul>
    </header>
    <div class="wrapper">
		<div class="row">
        <div class="col-md-12">
        	<div>
<pre class="prettyprint lang-javascript linenums">
push  从后面插入
unshift 从前面插入
pop  从后面取除并删除
shift 从前面取出并删除
</pre>
        	</div>
        	<canvas id="myCanvas" width="240" height="240" style="border:1px solid #d3d3d3;">Your browser does not support the HTML5 canvas tag.</canvas>
        </div>
    	</div>
    </div>
	</div>
	<script>
	// r蛇和食物的坐标  [down|up|left|right] : [40|38|37|39]
	var ctx = document.getElementById("myCanvas").getContext("2d"),
		co = 40,
		e = null;
	var point = {x:10, y:10}, // 原点
		move = {x:0, y:1};  // 位移
	var interval = setInterval(function() {
		if(!check(point)){
			return;
		}
		ctx.clearRect(0, 0, 240, 240);
		point.x += move.x,
		point.y += move.y;
		ctx.fillRect(point.x, point.y, 10, 10);
		if(e)
			ctx.fillRect(e.x, e.y, 10, 10);
		ctx.shadowBlur=20,
		ctx.shadowColor="red";
	}, 5);
	
	document.onkeydown = function(event) {
		co = event.keyCode>=37 && event.keyCode<=40 && (Math.abs(event.keyCode-co) != 2) ? event.keyCode: co;
		if(co == 38)
			move = {x:0, y:-1};
		else if(co == 37)
			move = {x:-1, y:0};
		else if(co == 39)	
			move = {x:1, y:0};
		else
			move = {x:0, y:1};
	}

	while(e == null)
		e={y:(Math.random()*24 >>>0),x:(Math.random()*24 >>>0)
	};

	function check(p) {
		if(p.x <= 0 || p.y <= 0 || p.x >= 230 || p.y >= 230) {
			console.log("game over");
			clearInterval(interval);
			return false;
		} else {
			return true;
		}

	}
	//ctx.clearRect(0,0,240,240);

/*	setInterval(function() {
    if (check(r[0], 0) || r[0].x < 0 || r[0].x >= 24 || r[0].y < 0 || r[0].y >= 24) return;
    e != null && ((co == 40 && r[0].x == e.x && r[0].y + 1 == e.y) || (co == 38 && r[0].x == e.x && r[0].y - 1 == e.y) || (co == 37 && r[0].x - 1 == e.x && r[0].y == e.y) || (co == 39 && r[0].x + 1 == e.x && r[0].y == e.y)) ? (r.unshift(e), e = null, r.unshift(r.pop())) : (r.unshift(r.pop())); (co == 40 || co == 38) ? (r[0].x = r[1].x, r[0].y = r[1].y + (co == 40 ? 1 : -1)) : (r[0].x = r[1].x + (co == 39 ? 1 : -1), r[0].y = r[1].y);

	ctx.clearRect(0,0,240,240);

	if(e)
		ctx.fillRect(e.x*10,e.y*10,10,10);

	for(var i=0;i<r.length;i++)
		ctx.fillRect(r[i].x*10,r[i].y*10,10,10);

	while(e==null || check(e))
		e={y:(Math.random()*24 >>>0),x:(Math.random()*24 >>>0)};

	if(check(r[0],0) || r[0].x < 0 || r[0].x >= 24 || r[0].y < 0 || r[0].y >= 24)
		console.log("game over\nYou get ["+(r.length-2)+"]");
	}, 100);

	document.onkeyup = function(event){
		co=event.keyCode>=37 && event.keyCode<=40 && (Math.abs(event.keyCode-co) != 2) ? event.keyCode: co;
	}

	function check(e, j) {
    for (var i = 0; i < r.length; i++) if (j != i && r[i].x == e.x && r[i].y == e.y) return true;
    return false;
	}*/
	</script>
	<script src="/static/js/jquery.min.js"></script>
	<script src="/static/js/bootstrap.min.js"></script>
	<script src="/static/js/prettify.js"></script>
	<script src="/static/js/core.js"></script>
</body>
</html>